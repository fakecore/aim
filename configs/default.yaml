# AIM Default Configuration File v1.0
# This is the global configuration template, will be installed to ~/.config/aim/config.yaml

version: "1.0"

# Global Settings
settings:
  language: en # Language: en/zh
  default_tool: claude-code # Default tool
  default_provider: deepseek # Default provider
  timeout: 60000 # Default timeout (milliseconds)

keys:

# Global Provider Configuration (OpenAI Compatible Endpoints)
providers:
  deepseek:
    base_url: https://api.deepseek.com/v1
    model: deepseek-chat
    timeout: 60000

  glm:
    base_url: https://open.bigmodel.cn/api/paas/v4
    model: glm-4.6
    timeout: 300000

  glm-coding:
    base_url: https://open.bigmodel.cn/api/coding/paas/v4
    model: glm-4.6
    timeout: 300000

  kimi:
    base_url: https://api.moonshot.cn/v1
    model: kimi-k2-turbo-preview
    timeout: 60000

  qwen:
    base_url: https://dashscope.aliyuncs.com/compatible-mode/v1
    model: qwen3-max
    timeout: 60000

# Tool Configuration
tools:
  claude-code:
    command: claude
    enabled: true

    # Tool-level default configuration
    defaults:
      timeout: 60000
      env:
        CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC: "1"

    # Field mapping definition
    field_mapping:
      ANTHROPIC_AUTH_TOKEN: keys.{current_key}.key
      ANTHROPIC_BASE_URL: profiles.{current_profile}.base_url
      ANTHROPIC_MODEL: profiles.{current_profile}.model
      API_TIMEOUT_MS: profiles.{current_profile}.timeout

    # Tool-specific Provider Configuration (Profile)
    profiles:
      deepseek:
        provider: deepseek
        base_url: https://api.deepseek.com/anthropic # Claude Code specific endpoint

      glm:
        provider: glm
        base_url: https://open.bigmodel.cn/api/anthropic # Claude Code specific endpoint
        env:
          ANTHROPIC_DEFAULT_HAIKU_MODEL: glm-4.5-air
          ANTHROPIC_DEFAULT_SONNET_MODEL: glm-4.6
          ANTHROPIC_DEFAULT_OPUS_MODEL: glm-4.6

      glm-coding:
        provider: glm-coding
        base_url: https://open.bigmodel.cn/api/anthropic # Claude Code specific endpoint
        env:
          ANTHROPIC_DEFAULT_HAIKU_MODEL: glm-4.5-air
          ANTHROPIC_DEFAULT_SONNET_MODEL: glm-4.6
          ANTHROPIC_DEFAULT_OPUS_MODEL: glm-4.6

      kimi:
        provider: kimi
        base_url: https://api.moonshot.cn/anthropic # Claude Code specific endpoint

      qwen:
        provider: qwen
        base_url: https://dashscope.aliyuncs.com/api/v2/apps/claude-code-proxy # Claude Code specific endpoint

  codex:
    command: codex
    enabled: true
    field_mapping:
      OPENAI_BASE_URL: profiles.{current_profile}.base_url
      OPENAI_MODEL: profiles.{current_profile}.model
      OPENAI_TIMEOUT: profiles.{current_profile}.timeout
    profiles:
      deepseek:
        provider: deepseek
        field_mapping:
          DEEPSEEK_API_KEY: keys.{current_key}.key
      glm:
        provider: glm
        field_mapping:
          GLM_API_KEY: keys.{current_key}.key
      glm-coding:
        provider: glm-coding
        field_mapping:
          GLM_API_KEY: keys.{current_key}.key
      kimi:
        provider: kimi
        field_mapping:
          KIMI_API_KEY: keys.{current_key}.key
      qwen:
        provider: qwen
        field_mapping:
          QWEN_API_KEY: keys.{current_key}.key

  opencode:
    command: opencode
    enabled: true
    field_mapping:
      OPENAI_API_KEY: keys.{current_key}.key
      OPENAI_BASE_URL: profiles.{current_profile}.base_url
    profiles:
      deepseek:
        provider: deepseek
        base_url: https://api.deepseek.com/v1
      glm:
        provider: glm
        base_url: https://open.bigmodel.cn/api/paas/v4
      glm-coding:
        provider: glm-coding
        base_url: https://open.bigmodel.cn/api/coding/paas/v4
      kimi:
        provider: kimi
        base_url: https://api.moonshot.cn/v1
      qwen:
        provider: qwen
        base_url: https://dashscope.aliyuncs.com/compatible-mode/v1
      openai:
        provider: openai
        base_url: https://api.openai.com/v1
